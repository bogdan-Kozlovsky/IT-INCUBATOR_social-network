(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{152:function(e,t,n){},17:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__5RQK7",images:"ProfileInfo_images__2ZQ9B",wrapper:"ProfileInfo_wrapper__ar6Hn",label:"ProfileInfo_label__2k_Nw",changeAvatarBox:"ProfileInfo_changeAvatarBox__2IZTw",inputFile:"ProfileInfo_inputFile__2MHjY",dataChangesBox:"ProfileInfo_dataChangesBox__1v_m_",title:"ProfileInfo_title__3LiCi",pencilDecor:"ProfileInfo_pencilDecor__2pCnK",statusBox:"ProfileInfo_statusBox__1evDX",statusInput:"ProfileInfo_statusInput__2ecQD",edit:"ProfileInfo_edit__3RPCH",tbody:"ProfileInfo_tbody__cjvlY"}},20:function(e,t,n){e.exports={loginWrapper:"style_loginWrapper__N9tP0",box:"style_box__3bekn",subTitle:"style_subTitle__3q87b",link:"style_link__32jd_",text:"style_text__nIWJu",decor:"style_decor__2CYM6",input:"style_input__2QUrT",label:"style_label__3fuOR",inputCheckbox:"style_inputCheckbox__24xM2"}},21:function(e,t,n){e.exports={navigation:"navigation_navigation__1kz7S",navigation__item:"navigation_navigation__item__3lnvr",navigation__link:"navigation_navigation__link__EVboG",navigation__active:"navigation_navigation__active__3gih1"}},23:function(e,t,n){e.exports={wrapperUsers:"users_wrapperUsers__1WQpu",boxUser:"users_boxUser__vAgjs",wrapper:"users_wrapper__1O3s3",userPhoto:"users_userPhoto__1H41c",name:"users_name__vpwOP",status:"users_status__3w5ee",nameSpan:"users_nameSpan__2tpcB",btn:"users_btn__1199v",loader:"users_loader__3AMDL"}},24:function(e,t,n){e.exports={header:"Header_header__3q43m",wrapper:"Header_wrapper__qew8b",btn:"Header_btn__hO9Xg",logout:"Header_logout__3j1kR",text:"Header_text__XHZIG",avatar:"Header_avatar__2lwXB",headerLogoText:"Header_headerLogoText__3kfQF",headerNavigateBox:"Header_headerNavigateBox__1LA3O",login:"Header_login__2quml"}},283:function(e,t,n){"use strict";n.r(t);var a,r,s=n(1),c=n.n(s),i=(n(152),n(63)),o=n.n(i),l=n(8),u=n(12),j=n(6),d=n(84),b=n.n(d),p=n(3),O={initialized:!1,progress:!0,error:null},f=function(e){return{type:"INITIALIZED-SUCCESS",value:e}},h=function(e){return{type:"PROGRESS",value:e}},m=function(e){return{type:"APP-ERROR",value:e}},x=l.d,v=function(e,t){if(e){t(m(e));setTimeout((function(){t(m(null))}),2e3)}},g=function(e){return e.auth},_=function(e){return e.dialogsPage},N=function(e){return e.app},w=function(e){return e.profilePage},y=function(e){return e.usersPage},k=function(e){return e.app.error},S=n(0),E=function(){var e=x(k);return Object(S.jsx)("div",{className:b.a.wrapper,children:Object(S.jsx)("div",{className:b.a.block,children:e})})},I=n(85),P=n.n(I),C=n.p+"static/media/loader.65c3f468.gif",A=function(){return Object(S.jsx)("div",{className:P.a.box,children:Object(S.jsx)("img",{className:P.a.img,src:C,alt:"loading"})})},T=n(19),R=n(35),U=n.n(R),L=n(117),F=n(118),M=Object(F.a)({form:"dialogAddMessageForm"})((function(e){var t=e.handleSubmit;return Object(S.jsxs)("form",{onSubmit:t,children:[Object(S.jsx)(L.a,{component:"textarea",name:"newMessageBody",className:"textArea",placeholder:"Enter your message"}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"submit",className:"btn",children:"Add message"})})]})}));!function(e){e.ME="/",e.PROFILE="/profile",e.DIALOGS="/dialogs",e.USERS="/users",e.LOGIN="/login",e.ERROR_404="404"}(a||(a={})),function(e){e[e.zeroRequest=0]="zeroRequest",e[e.tenRequest=0]="tenRequest"}(r||(r={}));var B=n(30),G={dialogs:[{id:1,name:"Slava"},{id:2,name:"Borya"},{id:3,name:"Igor"},{id:4,name:"Viktor"}],messages:[{id:1,message:"Hi how are you doing"},{id:2,message:"I heard that you have problems"},{id:3,message:"how is your health today"},{id:4,message:"Where had you been?"}]},D=function(){var e=Object(l.c)(),t=x(_),n=t.dialogs,r=t.messages,s=x(g).isAuth,c=n.map((function(e){var t=e.id,n=e.name;return Object(S.jsx)("div",{className:U.a.item,children:n},t)})),i=r.map((function(e){var t=e.id,n=e.message;return Object(S.jsx)("div",{className:U.a.item,children:n},t)}));return s?Object(S.jsxs)("div",{className:U.a.wrapper,children:[Object(S.jsxs)("div",{className:U.a.block,children:[Object(S.jsx)("div",{className:U.a.dialogsItems,children:c}),Object(S.jsx)("div",{className:U.a.messages,children:i})]}),Object(S.jsx)(M,{onSubmit:function(t){e({type:"SEND-MESSAGE",newMessageBody:t.newMessageBody}),e(Object(T.a)("dialogAddMessageForm"))}})]}):Object(S.jsx)(j.a,{to:a.LOGIN})},H=n(24),z=n.n(H),q=n.p+"static/media/logout.1bf8fe5c.svg",W=n.p+"static/media/users.998e6aeb.png",J=n(10),Q=n.n(J),V=n(14),Y=n(122),Z=n.n(Y).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"edbb6621-0047-4274-8a4c-f1d2a1bf4727"}}),X=function(){return Z.get("auth/me")},K=function(e,t,n,a){return Z.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},$=function(){return Z.delete("/auth/login")},ee=function(){return Z.get("security/get-captcha-url")},te={id:void 0,email:null,login:null,isAuth:!1,captchaUrl:null},ne=function(e,t,n,a){return{type:"SET-USER-DATA",payload:{id:e,email:t,login:n,isAuth:a}}},ae=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},re=function(){return function(){var e=Object(V.a)(Q.a.mark((function e(t){var n,a,s,c,i,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(h(!1)),e.next=4,X();case 4:(n=e.sent).data.resultCode===r.zeroRequest&&(a=n.data.data,s=a.id,c=a.email,i=a.login,t(ne(s,c,i,!0)),t(f(!0))),1,1===n.data.resultCode&&(t(f(!0)),v(n.data.messages[0],t)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t(f(!0)),e.t0 instanceof Error&&(o=e.t0.name,v(o,t));case 14:return e.prev=14,t(h(!0)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}()},se=function(){var e=Object(l.c)(),t=x(g).isAuth,n=x(w).profile;return Object(S.jsx)("header",{className:z.a.header,children:Object(S.jsx)("div",{className:"maxContainer",children:Object(S.jsxs)("div",{className:z.a.wrapper,children:[Object(S.jsx)("div",{children:Object(S.jsx)("span",{className:z.a.headerLogoText,children:"It-incubator"})}),Object(S.jsx)("div",{className:z.a.loginBlock,children:t?Object(S.jsxs)("div",{className:z.a.headerNavigateBox,children:[Object(S.jsx)("img",{className:z.a.avatar,src:(null===n||void 0===n?void 0:n.photos.small)||W,alt:"avatar"}),Object(S.jsxs)("button",{type:"submit",className:z.a.btn,onClick:function(){e(function(){var e=Object(V.a)(Q.a.mark((function e(t){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:e.sent.data.resultCode===r.zeroRequest&&(t(ne(void 0,null,null,!1)),t(f(!0))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Error&&(n=e.t0.name,v(n,t));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},children:[Object(S.jsx)("span",{className:z.a.text,children:"Log out"}),Object(S.jsx)("img",{className:z.a.logout,src:q,alt:"logoutIcon"})]})]}):Object(S.jsx)(u.b,{className:z.a.login,to:a.LOGIN,children:"Login"})})]})})})},ce=n(20),ie=n.n(ce),oe=n(67),le=n(88),ue=n.n(le),je=function(e){e.input;var t=e.meta,n=(e.child,Object(oe.a)(e,["input","meta","child"])),a=t.touched&&t.error;return Object(S.jsxs)("div",{className:"".concat(ue.a.formControl," ").concat(a?ue.a.error:""),children:[Object(S.jsx)("div",{children:n.children}),a&&Object(S.jsx)("span",{children:t.error})]})},de=function(e){var t=e.input,n=(e.meta,e.child,Object(oe.a)(e,["input","meta","child"]));return Object(S.jsx)(je,Object(p.a)(Object(p.a)({},e),{},{children:Object(S.jsx)("textarea",Object(p.a)(Object(p.a)({},t),n))}))},be=function(e){var t=e.input,n=(e.meta,e.child,Object(oe.a)(e,["input","meta","child"]));return Object(S.jsx)(je,Object(p.a)(Object(p.a)({},e),{},{children:Object(S.jsx)("input",Object(p.a)(Object(p.a)({},t),n))}))};function pe(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(S.jsxs)("div",{children:[Object(S.jsx)(L.a,Object(p.a)({placeholder:e,name:t,validate:n,component:a},r))," ",s]})}var Oe,fe=function(e){if(!e)return"Field is required"},he=Object(F.a)({form:"login"})((function(e){var t=e.error,n=e.captchaUrl,a=e.handleSubmit;return Object(S.jsxs)("form",{onSubmit:a,children:[Object(S.jsx)("div",{children:Object(S.jsx)(L.a,{validate:[fe],component:be,className:ie.a.input,name:"login",placeholder:"Login"})}),Object(S.jsx)("div",{children:Object(S.jsx)(L.a,{validate:[fe],component:be,className:ie.a.input,name:"password",placeholder:"Password",type:"password"})}),Object(S.jsxs)("label",{className:ie.a.label,children:["remember me",Object(S.jsx)(L.a,{component:be,className:ie.a.inputCheckbox,name:"rememberMe",type:"checkbox"})]}),n&&Object(S.jsx)("img",{src:n,alt:"captchaUrl"}),n&&pe("Symbols from image","captcha",[fe],be,{}),t&&Object(S.jsx)("div",{style:{color:"red"},children:t}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:"btn",type:"submit",children:"Login"})})]})})),me=function(){var e=x(g),t=e.isAuth,n=e.captchaUrl,s=Object(l.c)();return t?Object(S.jsx)(j.a,{to:a.ME}):Object(S.jsx)("div",{className:ie.a.loginWrapper,children:Object(S.jsxs)("div",{className:ie.a.box,children:[Object(S.jsxs)("h3",{className:ie.a.subTitle,children:["To log in get registered ",Object(S.jsx)("a",{className:ie.a.link,href:"https://social-network.samuraijs.com/login",children:"here"})," or use common test account credentials:"]}),Object(S.jsxs)("p",{className:ie.a.text,children:["Email:",Object(S.jsx)("span",{className:ie.a.decor,children:"  bogdankozlovski18@gmail.com"})]}),Object(S.jsxs)("p",{className:ie.a.text,children:["Password:",Object(S.jsx)("span",{className:ie.a.decor,children:" bogdan04.06"})]}),Object(S.jsx)(he,{onSubmit:function(e){var t,n,a,c;s((t=e.login,n=e.password,a=e.rememberMe,c=e.captcha,function(){var e=Object(V.a)(Q.a.mark((function e(s){var i,o,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(t,n,a,c);case 3:if((i=e.sent).data.resultCode!==r.zeroRequest){e.next=9;break}return e.next=7,s(re());case 7:e.next=17;break;case 9:if(i.data.resultCode!==r.tenRequest){e.next=14;break}return e.next=12,s(function(){var e=Object(V.a)(Q.a.mark((function e(t){var n,a,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee();case 3:n=e.sent,a=n.data.url,t(ae(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0 instanceof Error&&(r=e.t0.name,v(r,t));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 12:e.next=17;break;case 14:o=i.data.messages.length>0?i.data.messages[0]:"Some error",s(Object(T.b)("login",{_error:o}));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),e.t0 instanceof Error&&(l=e.t0.name,v(l,s));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()))},captchaUrl:n})]})})},xe=n(51),ve=n.n(xe),ge=n(52),_e=n.n(ge),Ne=n.p+"static/media/likeActive.652cec0c.svg",we=n.p+"static/media/likeNoActive.9895b6a3.svg",ye=n.p+"static/media/post.f6af492a.svg",ke=n(285),Se=function(e){return Z.get("profile/".concat(e))},Ee=function(e){return Z.get("profile/status/".concat(e))},Ie=function(e){return Z.put("profile/status",{status:e})},Pe=function(e){var t=new FormData;return t.append("image",e),Z.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},Ce=function(e){return Z.put("profile",e)},Ae={posts:[{id:Object(ke.a)(),message:"Hi,how are you",likesCount:0},{id:Object(ke.a)(),message:"Hi, you",likesCount:1},{id:Object(ke.a)(),message:"Hi,how are you",likesCount:0},{id:Object(ke.a)(),message:"how are you",likesCount:0}],profile:null,status:""},Te=function(e){return{type:"SET-STATUS",status:e}},Re=function(e){return function(){var t=Object(V.a)(Q.a.mark((function t(n){var a,r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(h(!0)),t.next=4,Se(e);case 4:a=t.sent,n({type:"SET-USER-PROFILE",profile:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(r=t.t0.name,v(r,n));case 11:return t.prev=11,n(h(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Ue=function(e){return function(){var t=Object(V.a)(Q.a.mark((function t(n){var a,r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(h(!1)),t.next=4,Ee(e);case 4:a=t.sent,n(Te(a.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(r=t.t0.name,v(r,n));case 11:return t.prev=11,n(h(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){var t=Object(l.c)(),n=e.message,a=e.likesCount,r=e.id,s=function(){t(function(e,t){return{type:"COUNTER",id:e,likesCount:t}}(r,a+1))};return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:_e.a.item,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("img",{className:_e.a.icons,src:ye,alt:"logo"}),Object(S.jsx)("span",{children:n})]}),Object(S.jsxs)("div",{children:[a>0?Object(S.jsx)("img",{onClick:s,className:_e.a.likesIcon,src:Ne,alt:"likes"}):Object(S.jsx)("img",{onClick:s,className:_e.a.likesIcon,src:we,alt:"likesActive"}),Object(S.jsx)("span",{children:a})]})]})})},Fe=Object(s.memo)((function(){var e=Object(l.c)(),t=x(w).posts.map((function(e){var t=e.id,n=e.message,a=e.likesCount;return Object(S.jsx)("div",{children:Object(S.jsx)(Le,{message:n,likesCount:a,id:t})},"".concat(t).concat(a))}));return Object(S.jsxs)("div",{className:ve.a.myPosts,children:[Object(S.jsx)("h3",{className:ve.a.subtitle,children:"My Posts"}),Object(S.jsx)("div",{children:Object(S.jsx)(Be,{onSubmit:function(t){e({type:"ADD-POST",newPostBody:t.newPostBody}),e(Object(T.a)("postAddForm"))}})}),Object(S.jsx)("div",{className:ve.a.posts,children:t})]})})),Me=(Oe=10,function(e){if(e.length>Oe)return"Max length is ".concat(Oe," symbols")}),Be=Object(F.a)({form:"postAddForm"})((function(e){return Object(S.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(S.jsx)(L.a,{validate:[fe,Me],component:de,className:"textArea",name:"newPostBody",placeholder:"Enter your post"}),Object(S.jsx)("div",{className:ve.a.boxBtn,children:Object(S.jsx)("button",{className:"btn",children:"Add post"})})]})})),Ge=n(16),De=n(17),He=n.n(De),ze=Object(F.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,a=e.error;return Object(S.jsxs)("form",{onSubmit:t,children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{children:"save"})}),a&&Object(S.jsx)("div",{children:a}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"Full name"}),": ",pe("Full name","fullName",[],be)]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"Looking for a job"}),": ",pe("","lookingForAJob",[],be,{type:"checkbox"})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"My professional skills"}),":",pe("My professional skills","lookingForAJobDescription",[],de)]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"About me"}),":",pe("About me","aboutMe",[],de)]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"Contacts"}),": ",Object.keys(null===n||void 0===n?void 0:n.contacts).map((function(e){return Object(S.jsx)("div",{children:Object(S.jsxs)("b",{children:[e,": ",pe(e,"contacts.".concat(e),[],be)]})},e)}))]})]})})),qe=n.p+"static/media/pencil.0312b8be.svg",We=function(e){var t=e.status,n=e.userId,a=e.myId;return console.log(t),Object(S.jsx)("div",{children:n===a?Object(S.jsx)(Je,{status:t}):Object(S.jsx)("span",{children:t||"not status"})})},Je=function(e){var t=e.status,n=Object(s.useState)(!1),a=Object(Ge.a)(n,2),c=a[0],i=a[1],o=Object(s.useState)(t),u=Object(Ge.a)(o,2),j=u[0],d=u[1],b=Object(l.c)();return Object(S.jsx)("div",{children:c?Object(S.jsx)("input",{className:He.a.statusInput,onChange:function(e){d(e.currentTarget.value)},onBlur:function(){b(function(e){return function(){var t=Object(V.a)(Q.a.mark((function t(n){var a;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(h(!1)),t.next=4,Ie(e);case 4:t.sent.data.resultCode===r.zeroRequest&&n(Te(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(a=t.t0.name,v(a,n));case 11:return t.prev=11,n(h(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}(j)),i(!1)},autoFocus:!0,type:"text",placeholder:"change profile status",value:j}):Object(S.jsxs)("div",{onDoubleClick:function(){i(!0)},className:He.a.statusBox,children:[Object(S.jsx)("b",{children:"status:"}),Object(S.jsx)("span",{children:t||"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),Object(S.jsx)("img",{className:He.a.pencilDecor,src:qe,alt:"pencil"})]})})},Qe=function(e){var t,n=e.profile,a=e.status,c=e.userId,i=Object(l.c)(),o=Object(s.useState)(!1),u=Object(Ge.a)(o,2),j=u[0],d=u[1],b=null===(t=x(w).profile)||void 0===t?void 0:t.photos.large,p=x(g).id;if(!n)return Object(S.jsx)(A,{});return Object(S.jsxs)("div",{className:He.a.wrapper,children:[Object(S.jsxs)("div",{className:He.a.changeAvatarBox,children:[Object(S.jsx)("img",{className:He.a.images,src:b||W,alt:"img"}),p===c&&Object(S.jsxs)("label",{className:He.a.label,children:["change avatar",Object(S.jsx)("input",{className:He.a.inputFile,type:"file",onChange:function(e){var t;e.currentTarget.files&&e.currentTarget.files.length&&i((t=e.currentTarget.files[0],function(){var e=Object(V.a)(Q.a.mark((function e(n){var a,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(h(!1)),e.next=4,Pe(t);case 4:if((a=e.sent).data.resultCode!==r.zeroRequest){e.next=9;break}return e.next=8,n(Re("22141"));case 8:n({type:"SAVE-PHOTO-SUCCESS",photos:a.data.data.photos});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Error&&(s=e.t0.name,v(s,n));case 14:return e.prev=14,n(h(!0)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()))}})]})]}),Object(S.jsxs)("div",{className:He.a.dataChangesBox,children:[Object(S.jsx)("h2",{className:He.a.title,children:"User information:"}),Object(S.jsx)(We,{status:a,myId:p,userId:c}),j?Object(S.jsx)(ze,{initialValues:n,profile:n,onSubmit:function(e){i(function(e){return function(){var t=Object(V.a)(Q.a.mark((function t(n,a){var s,c,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(h(!1)),s=a().auth.id,t.next=5,Ce(e);case 5:if((c=t.sent).data.resultCode!==r.zeroRequest){t.next=10;break}n(Re(s)),t.next=12;break;case 10:return n(Object(T.b)("edit-profile",{_error:c.data.messages[0]})),t.abrupt("return",Promise.reject(c.data.messages[0]));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0 instanceof Error&&(i=t.t0.name,v(i,n));case 17:return t.prev=17,n(h(!0)),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)),d(!1)}}):Object(S.jsx)(Ve,{profile:n,goToEditMode:function(){return d(!0)}}),p===c&&Object(S.jsx)("button",{className:He.a.edit,onClick:function(){return d(!j)},children:"Edit information \u270e"})]})]})},Ve=function(e){var t=e.profile;e.goToEditMode;return Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{className:He.a.tbody,children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Full name:"}),Object(S.jsx)("td",{children:t.fullName})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"About me:"}),Object(S.jsx)("td",{children:t.aboutMe})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Looking for a job:"}),Object(S.jsx)("td",{children:t.lookingForAJob?"yes":"not"})]}),t.lookingForAJob&&Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"My professional skills"}),":",t.lookingForAJob]}),Object(S.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(e){return Object(S.jsx)("div",{children:null!==t.contacts[e]&&Object(S.jsx)(Ye,{contactTitle:e,contactValue:t.contacts[e]})},e)}))]})})},Ye=function(e){var t=e.contactTitle,n=e.contactValue;return Object(S.jsx)("table",{children:Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsxs)("td",{children:[t,":"]}),Object(S.jsx)("td",{children:n})]})})})},Ze=function(){var e,t=Object(l.c)(),n=x(g),r=n.id,c=n.isAuth,i=x(w),o=i.profile,u=i.status;null===(e=x(w).profile)||void 0===e||e.photos.small;return Object(s.useEffect)((function(){r&&(t(Re(Number(r))),t(Ue(Number(r))))}),[]),c?Object(S.jsxs)("div",{style:{width:"100%"},children:[Object(S.jsx)(Qe,{profile:o,status:u,userId:r}),Object(S.jsx)(Fe,{})]}):Object(S.jsx)(j.a,{to:a.LOGIN})},Xe=n(123),Ke=n.n(Xe),$e=n(21),et=n.n($e),tt=function(){return Object(S.jsx)("div",{children:Object(S.jsxs)("ul",{className:Ke()(et.a.navigation__items,et.a.navigation),children:[Object(S.jsx)("li",{className:et.a.navigation__item,children:Object(S.jsx)(u.b,{className:function(e){var t=e.isActive;return"".concat(et.a.navigation__link," ").concat(t?et.a.navigation__active:"")},to:a.ME,children:"Me"})}),Object(S.jsx)("li",{className:et.a.navigation__item,children:Object(S.jsx)(u.b,{className:function(e){var t=e.isActive;return"".concat(et.a.navigation__link," ").concat(t?et.a.navigation__active:"")},to:a.DIALOGS,children:"Messages"})}),Object(S.jsx)("li",{className:et.a.navigation__item,children:Object(S.jsx)(u.b,{className:function(e){var t=e.isActive;return"".concat(et.a.navigation__link," ").concat(t?et.a.navigation__active:"")},to:a.USERS,children:"Users"})})]})})},nt=function(){var e=Object(l.c)(),t=x(w),n=t.profile,r=t.status,c=x(g).isAuth,i=Object(j.h)().userId;return Object(s.useEffect)((function(){i&&(e(Re(Number(i))),e(Ue(Number(i))))}),[i,e]),c?Object(S.jsx)("div",{style:{width:"100%"},children:Object(S.jsx)(Qe,{profile:n,status:r,userId:i})}):Object(S.jsx)(j.a,{to:a.LOGIN})},at=n(23),rt=n.n(at),st=n(31),ct=n.n(st),it=n.p+"static/media/leftArrow.1bc5754e.svg",ot=n.p+"static/media/rightArrow.0684657e.svg",lt=function(e){for(var t=Object.assign({},e),n=t.pageSize,a=t.totalUsersCount,r=t.currentPage,c=t.onPageChanged,i=t.portionSize,o=void 0===i?10:i,l=Math.ceil(a/n),u=Math.ceil(l/o),j=Object(s.useState)(1),d=Object(Ge.a)(j,2),b=d[0],p=d[1],O=(b-1)*o+1,f=b*o,h=[],m=1;m<=l;m++)h.push(m);return Object(S.jsxs)("div",{className:ct.a.wrapperPaginator,children:[b>1&&Object(S.jsx)("button",{className:ct.a.btn,onClick:function(){p(b-1)},children:Object(S.jsx)("img",{className:ct.a.arrow,src:it,alt:"leftArrow"})}),h.filter((function(e){return e>=O&&e<=f})).map((function(e){return Object(S.jsx)("span",{className:"".concat(ct.a.span," ").concat(r===e?ct.a.active:""),onClick:function(t){c(e)},children:e},e)})),u>b&&Object(S.jsx)("button",{className:ct.a.btn,onClick:function(){p(b+1)},children:Object(S.jsx)("img",{className:ct.a.arrow,src:ot,alt:"rightArrow"})})]})},ut={getUsers:function(e,t){return Z.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return Z.delete("follow/".concat(e))},follow:function(e){return Z.post("follow/".concat(e))}},jt={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},dt=function(e){return{type:"FOLLOW",userId:e}},bt=function(e){return{type:"UNFOLLOW",userId:e}},pt=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},Ot=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},ft=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRESS",isFetching:e,userId:t}},ht=function(e,t){return function(){var n=Object(V.a)(Q.a.mark((function n(a){var r;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(h(!1)),a(Ot(!0)),a(pt(e)),n.next=6,ut.getUsers(e,t);case 6:r=n.sent,a({type:"SET-USER",users:r.items}),a({type:"SET-USERS-TOTAL-COUNT",totalCount:r.totalCount});case 9:return n.prev=9,a(h(!0)),a(Ot(!1)),n.finish(9);case 13:case"end":return n.stop()}}),n,null,[[0,,9,13]])})));return function(e){return n.apply(this,arguments)}}()},mt=function(){var e=Object(V.a)(Q.a.mark((function e(t,n,a,s){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ft(!0,n)),e.next=3,a(n);case 3:e.sent.data.resultCode===r.zeroRequest&&t(s(n)),t(ft(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),xt=function(e){var t=Object.assign({},e),n=Object(l.c)(),r=t.user,s=t.followingInProgress,c=function(e){var t;n((t=e,function(){var e=Object(V.a)(Q.a.mark((function e(n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(n,t,ut.unfollow.bind(ut),bt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},i=function(e){var t;n((t=e,function(){var e=Object(V.a)(Q.a.mark((function e(n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(n,t,ut.follow.bind(ut),dt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return Object(S.jsxs)("div",{className:rt.a.wrapper,children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{children:Object(S.jsx)(u.b,{to:"".concat(a.PROFILE,"/").concat(r.id),children:Object(S.jsx)("img",{src:null!=r.photos.small?r.photos.small:W,className:rt.a.userPhoto,alt:"usePhoto"})})})}),Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:rt.a.name,children:["Name: ",Object(S.jsx)("span",{className:rt.a.nameSpan,children:r.name})]}),Object(S.jsx)("span",{className:rt.a.status,children:r.status?r.status:"no status"}),r.followed?Object(S.jsx)("button",{className:rt.a.btn,disabled:s.some((function(e){return e===r.id})),onClick:function(){return c(r.id)},children:"Unfollow"}):Object(S.jsx)("button",{className:rt.a.btn,disabled:s.some((function(e){return e===r.id})),onClick:function(){return i(r.id)},children:"Follow"})]})})]})},vt=function(){var e=Object(l.c)(),t=x(y),n=t.users,r=t.pageSize,c=t.totalUsersCount,i=t.currentPage,o=t.followingInProgress,u=x(g).isAuth;return Object(s.useEffect)((function(){e(ht(i,r))}),[]),u?Object(S.jsxs)("div",{className:rt.a.wrapperUsers,children:[Object(S.jsx)(lt,{currentPage:i,onPageChanged:function(t){e(ht(t,r))},totalUsersCount:c,pageSize:r}),Object(S.jsx)("div",{className:rt.a.boxUser,children:n.map((function(e){return Object(S.jsx)(xt,{user:e,followingInProgress:o},e.id)}))})]}):Object(S.jsx)(j.a,{to:a.LOGIN})},gt=function(){var e=Object(l.c)(),t=x(k),n=x(N),r=n.progress,c=n.initialized;return Object(s.useEffect)((function(){e(re())}),[]),c?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(se,{}),t&&Object(S.jsx)(E,{}),!r&&Object(S.jsx)("div",{className:"nav",children:Object(S.jsx)("div",{className:"statusBar"})}),Object(S.jsxs)("div",{className:"app-wrapper",children:[Object(S.jsx)(tt,{}),Object(S.jsxs)(j.d,{children:[Object(S.jsx)(j.b,{path:a.ME,element:Object(S.jsx)(Ze,{})}),Object(S.jsx)(j.b,{path:"".concat(a.PROFILE,"/:userId"),element:Object(S.jsx)(nt,{})}),Object(S.jsx)(j.b,{path:a.DIALOGS,element:Object(S.jsx)(D,{})}),Object(S.jsx)(j.b,{path:a.USERS,element:Object(S.jsx)(vt,{})}),Object(S.jsx)(j.b,{path:a.LOGIN,element:Object(S.jsx)(me,{})}),Object(S.jsx)(j.b,{path:"/*",element:Object(S.jsx)("div",{children:"error"})})]})]})]}):Object(S.jsx)(A,{})},_t=n(11),Nt=n(124),wt=n(119),yt=n(125),kt=Object(_t.combineReducers)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(p.a)(Object(p.a)({},e),{},{posts:[].concat(Object(B.a)(e.posts),[{id:Object(ke.a)(),message:t.newPostBody,likesCount:0}])});case"SET-USER-PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case"SET-STATUS":return Object(p.a)(Object(p.a)({},e),{},{status:t.status});case"COUNTER":return Object(p.a)(Object(p.a)({},e),{},{posts:Object(B.a)(e.posts.map((function(e){return e.id===t.id?Object(p.a)(Object(p.a)({},e),{},{likesCount:t.likesCount}):e})))});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:[].concat(Object(B.a)(e.messages),[{id:6,message:t.newMessageBody}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(p.a)(Object(p.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(p.a)(Object(p.a)({},e),{},{followed:!1}):e}))});case"SET-USER":return Object(p.a)(Object(p.a)({},e),{},{users:Object(B.a)(t.users)});case"SET-CURRENT-PAGE":return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case"SET-USERS-TOTAL-COUNT":return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE-IS-FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROGRESS":return Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(B.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(p.a)(Object(p.a)(Object(p.a)({},e),t.payload),{},{isAuth:t.payload.isAuth});case"GET_CAPTCHA_URL_SUCCESS":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},form:wt.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{initialized:t.value});case"APP-ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.value});case"PROGRESS":return Object(p.a)(Object(p.a)({},e),{},{progress:t.value});default:return e}}}),St=Object(_t.createStore)(kt,Object(Nt.composeWithDevTools)(Object(_t.applyMiddleware)(yt.a)));o.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(l.a,{store:St,children:Object(S.jsx)(u.a,{children:Object(S.jsx)(gt,{})})})}),document.getElementById("root"))},31:function(e,t,n){e.exports={wrapperPaginator:"paginator_wrapperPaginator__11cPR",arrow:"paginator_arrow__3hN6X",btn:"paginator_btn__1x78D",active:"paginator_active__1lzh6",span:"paginator_span__1Hryq"}},35:function(e,t,n){e.exports={wrapper:"Dialogs_wrapper__3FNzr",block:"Dialogs_block__Jw7X4",item:"Dialogs_item__2eDoH"}},51:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__1V9iv",posts:"MyPosts_posts__2Iz8x",subtitle:"MyPosts_subtitle__1j497",boxBtn:"MyPosts_boxBtn__ZY5gB"}},52:function(e,t,n){e.exports={item:"Post_item__3-Ewb",icons:"Post_icons__3WArY",likesIcon:"Post_likesIcon__2BwZF"}},84:function(e,t,n){e.exports={wrapper:"error_wrapper__1maBr",block:"error_block__3xg_Y"}},85:function(e,t,n){e.exports={img:"style_img__2HQOT",box:"style_box__2noti"}},88:function(e,t,n){e.exports={formControl:"FormControls_formControl__vKn3r",error:"FormControls_error__3U5re"}}},[[283,1,2]]]);
//# sourceMappingURL=main.f137c61a.chunk.js.map