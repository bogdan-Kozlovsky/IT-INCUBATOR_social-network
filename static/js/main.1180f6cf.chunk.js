(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{123:function(e,t,n){e.exports={wrapper:"Me_wrapper__2yQyB"}},125:function(e,t,n){e.exports={wrapper:"Profile_wrapper__2o7DY"}},15:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__5RQK7",images:"ProfileInfo_images__2ZQ9B",wrapper:"ProfileInfo_wrapper__ar6Hn",label:"ProfileInfo_label__2k_Nw",changeAvatarBox:"ProfileInfo_changeAvatarBox__2IZTw",inputFile:"ProfileInfo_inputFile__2MHjY",dataChangesBox:"ProfileInfo_dataChangesBox__1v_m_",title:"ProfileInfo_title__3LiCi",pencilDecor:"ProfileInfo_pencilDecor__2pCnK",statusBox:"ProfileInfo_statusBox__1evDX",statusInput:"ProfileInfo_statusInput__2ecQD",edit:"ProfileInfo_edit__3RPCH",tbody:"ProfileInfo_tbody__cjvlY"}},154:function(e,t,n){},20:function(e,t,n){e.exports={loginWrapper:"style_loginWrapper__N9tP0",box:"style_box__3bekn",subTitle:"style_subTitle__3q87b",link:"style_link__32jd_",text:"style_text__nIWJu",decor:"style_decor__2CYM6",input:"style_input__2QUrT",label:"style_label__3fuOR",inputCheckbox:"style_inputCheckbox__24xM2"}},21:function(e,t,n){e.exports={header:"Header_header__3q43m",wrapper:"Header_wrapper__qew8b",btn:"Header_btn__hO9Xg",logout:"Header_logout__3j1kR",text:"Header_text__XHZIG",avatar:"Header_avatar__2lwXB",headerLogoText:"Header_headerLogoText__3kfQF",headerNavigateBox:"Header_headerNavigateBox__1LA3O",login:"Header_login__2quml"}},23:function(e,t,n){e.exports={wrapperUsers:"Users_wrapperUsers__3FPDj",boxUser:"Users_boxUser__vz2I-",wrapper:"Users_wrapper__3IL7r",userPhoto:"Users_userPhoto__2z-9s",name:"Users_name__k9L-S",status:"Users_status__m3_3E",nameSpan:"Users_nameSpan__2dqmU",btn:"Users_btn__1fxC8",loader:"Users_loader__nlK0R"}},285:function(e,t,n){"use strict";n.r(t);var a,r,s=n(1),c=(n(154),n(63)),i=n.n(c),o=n(9),l=n(13),u=n(6),j=function(e){return e.app.errorMessage},d=n(84),b=n.n(d),p=o.d,O=n(0),f=function(){var e=p(j);return Object(O.jsx)("div",{className:b.a.wrapper,children:Object(O.jsx)("div",{className:b.a.block,children:e})})},h=n(85),m=n.n(h),x=n.p+"static/media/loader.65c3f468.gif",v=function(){return Object(O.jsx)("div",{className:m.a.box,children:Object(O.jsx)("img",{className:m.a.img,src:x,alt:"loading"})})},_=n(19),g=function(e){return e.auth.isAuth},N=function(e){return e.auth.captchaUrl},E=function(e){return e.auth.id},S=function(e){return e.dialogsPage.dialogs},C=function(e){return e.dialogsPage.messages},w=n(35),y=n.n(w),P=n(117),k=n(118),I=Object(k.a)({form:"dialogAddMessageForm"})((function(e){var t=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:t,children:[Object(O.jsx)(P.a,{component:"textarea",name:"newMessageBody",className:"textArea",placeholder:"Enter your message"}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",className:"btn",children:"Add message"})})]})}));!function(e){e.ME="/",e.PROFILE="/profile",e.DIALOGS="/dialogs",e.USERS="/users",e.LOGIN="/login",e.PAGE_NOT_FOUND="404"}(a||(a={})),function(e){e[e.COMPLETED_SUCCESSFULLY_NUMBER=0]="COMPLETED_SUCCESSFULLY_NUMBER",e[e.REDIRECT_TO_CAPTCHA=10]="REDIRECT_TO_CAPTCHA"}(r||(r={}));var U=function(){var e=Object(o.c)(),t=p(S),n=p(C),r=p(g),s=t.map((function(e){var t=e.id,n=e.name;return Object(O.jsx)("div",{className:y.a.item,children:n},t)})),c=n.map((function(e){var t=e.id,n=e.message;return Object(O.jsx)("div",{className:y.a.item,children:n},t)}));return r?Object(O.jsxs)("div",{className:y.a.wrapper,children:[Object(O.jsxs)("div",{className:y.a.block,children:[Object(O.jsx)("div",{className:y.a.dialogsItems,children:s}),Object(O.jsx)("div",{className:y.a.messages,children:c})]}),Object(O.jsx)(I,{onSubmit:function(t){e({type:"SEND-MESSAGE",newMessageBody:t.newMessageBody}),e(Object(_.a)("dialogAddMessageForm"))}})]}):Object(O.jsx)(u.a,{to:a.LOGIN})},T=n(21),L=n.n(T),A=n.p+"static/media/logout.1bf8fe5c.svg",R=n.p+"static/media/users.998e6aeb.png",M=n(7),F=n.n(M),B=n(11),D=n(122),G=n.n(D).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"edbb6621-0047-4274-8a4c-f1d2a1bf4727"}}),H=function(){return G.get("auth/me")},Y=function(e,t,n,a){return G.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},z=function(){return G.delete("/auth/login")},W=function(e){return{type:"INITIALIZED-SUCCESS",value:e}},J=function(e){return{type:"PROGRESS",value:e}},q=function(e){return{type:"APP-ERROR",value:e}},Q=function(e,t){e&&(t(q(e)),setTimeout((function(){t(q(null))}),5e3))},V=function(e,t,n,a){return{type:"SET-USER-DATA",payload:{id:e,email:t,login:n,isAuth:a}}},Z=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},X=function(e){return e.profilePage.profile},K=function(e){var t;return null===(t=e.profilePage.profile)||void 0===t?void 0:t.photos.large},$=function(e){return e.profilePage.posts},ee=function(e){return e.profilePage.status},te=function(){var e=Object(o.c)(),t=p(X);return Object(O.jsxs)("div",{className:L.a.headerNavigateBox,children:[Object(O.jsx)("img",{className:L.a.avatar,src:(null===t||void 0===t?void 0:t.photos.small)||R,alt:"avatar"}),Object(O.jsxs)("button",{type:"submit",className:L.a.btn,onClick:function(){e(function(){var e=Object(B.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:e.sent.data.resultCode===r.COMPLETED_SUCCESSFULLY_NUMBER&&(t(V(void 0,null,null,!1)),t(W(!0))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Error&&(n=e.t0.name,Q(n,t));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},children:[Object(O.jsx)("span",{className:L.a.text,children:"Log out"}),Object(O.jsx)("img",{className:L.a.logout,src:A,alt:"logoutIcon"})]})]})},ne=function(){var e=p(g);return Object(O.jsx)("header",{className:L.a.header,children:Object(O.jsx)("div",{className:"maxContainer",children:Object(O.jsxs)("div",{className:L.a.wrapper,children:[Object(O.jsx)("div",{children:Object(O.jsx)("span",{className:L.a.headerLogoText,children:"It-incubator"})}),Object(O.jsx)("div",{className:L.a.loginBlock,children:e?Object(O.jsx)(te,{}):Object(O.jsx)(l.b,{className:L.a.login,to:a.LOGIN,children:"Login"})})]})})})},ae=function(){return function(){var e=Object(B.a)(F.a.mark((function e(t){var n,a,s,c,i,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(J(!1)),e.next=4,H();case 4:(n=e.sent).data.resultCode===r.COMPLETED_SUCCESSFULLY_NUMBER&&(a=n.data.data,s=a.id,c=a.email,i=a.login,t(V(s,c,i,!0)),t(W(!0))),1,1===n.data.resultCode&&(t(W(!0)),Q(n.data.messages[0],t)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t(W(!0)),e.t0 instanceof Error&&(o=e.t0.name,Q(o,t));case 14:return e.prev=14,t(J(!0)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}()},re=function(){return G.get("security/get-captcha-url")},se=n(20),ce=n.n(se),ie=n(3),oe=n(67),le=n(88),ue=n.n(le),je=function(e){e.input;var t=e.meta,n=(e.child,Object(oe.a)(e,["input","meta","child"])),a=t.touched&&t.error;return Object(O.jsxs)("div",{className:"".concat(ue.a.formControl," ").concat(a?ue.a.error:""),children:[Object(O.jsx)("div",{children:n.children}),a&&Object(O.jsx)("span",{children:t.error})]})},de=function(e){var t=e.input,n=(e.meta,e.child,Object(oe.a)(e,["input","meta","child"]));return Object(O.jsx)(je,Object(ie.a)(Object(ie.a)({},e),{},{children:Object(O.jsx)("textarea",Object(ie.a)(Object(ie.a)({},t),n))}))},be=function(e){var t=e.input,n=(e.meta,e.child,Object(oe.a)(e,["input","meta","child"]));return Object(O.jsx)(je,Object(ie.a)(Object(ie.a)({},e),{},{children:Object(O.jsx)("input",Object(ie.a)(Object(ie.a)({},t),n))}))};function pe(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(O.jsxs)("div",{children:[Object(O.jsx)(P.a,Object(ie.a)({placeholder:e,name:t,validate:n,component:a},r))," ",s]})}var Oe,fe=function(e){if(!e)return"Field is required"},he=Object(k.a)({form:"login"})((function(e){var t=e.error,n=e.captchaUrl,a=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:a,children:[Object(O.jsx)("div",{children:Object(O.jsx)(P.a,{validate:[fe],component:be,className:ce.a.input,name:"login",placeholder:"Login"})}),Object(O.jsx)("div",{children:Object(O.jsx)(P.a,{validate:[fe],component:be,className:ce.a.input,name:"password",placeholder:"Password",type:"password"})}),Object(O.jsxs)("label",{className:ce.a.label,children:["remember me",Object(O.jsx)(P.a,{component:be,className:ce.a.inputCheckbox,name:"rememberMe",type:"checkbox"})]}),n&&Object(O.jsx)("img",{src:n,alt:"captchaUrl"}),n&&pe("Symbols from image","captcha",[fe],be,{}),t&&Object(O.jsx)("div",{style:{color:"red"},children:t}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"btn",type:"submit",children:"Login"})})]})})),me=function(){var e=Object(o.c)(),t=p(g),n=p(N);return t?Object(O.jsx)(u.a,{to:a.ME}):Object(O.jsx)("div",{className:ce.a.loginWrapper,children:Object(O.jsxs)("div",{className:ce.a.box,children:[Object(O.jsxs)("h3",{className:ce.a.subTitle,children:["To log in get registered",Object(O.jsx)("a",{className:ce.a.link,href:"https://social-network.samuraijs.com/login",children:"here"})," or use common test account credentials:"]}),Object(O.jsxs)("p",{className:ce.a.text,children:["Email:",Object(O.jsx)("span",{className:ce.a.decor,children:Object(O.jsx)("span",{children:"bogdankozlovski18@gmail.com"})})]}),Object(O.jsxs)("p",{className:ce.a.text,children:["Password:",Object(O.jsx)("span",{className:ce.a.decor,children:Object(O.jsx)("span",{children:"socialPassword"})})]}),Object(O.jsx)(he,{onSubmit:function(t){var n,a,s,c;e((n=t.login,a=t.password,s=t.rememberMe,c=t.captcha,function(){var e=Object(B.a)(F.a.mark((function e(t){var i,o,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(n,a,s,c);case 3:if((i=e.sent).data.resultCode!==r.COMPLETED_SUCCESSFULLY_NUMBER){e.next=7;break}return e.next=7,t(ae());case 7:if(i.data.resultCode!==r.REDIRECT_TO_CAPTCHA){e.next=10;break}return e.next=10,t(function(){var e=Object(B.a)(F.a.mark((function e(t){var n,a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re();case 3:n=e.sent,a=n.data.url,t(Z(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0 instanceof Error&&(r=e.t0.name,Q(r,t));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 10:o=i.data.messages.length>0?i.data.messages[0]:"Some error",t(Object(_.b)("login",{_error:o})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0 instanceof Error&&(l=e.t0.name,Q(l,t));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()))},captchaUrl:n})]})})},xe=function(e){return G.get("profile/".concat(e))},ve=function(e){return G.get("profile/status/".concat(e))},_e=function(e){return G.put("profile/status",{status:e})},ge=function(e){var t=new FormData;return t.append("image",e),G.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},Ne=function(e){return G.put("profile",e)},Ee=function(e){return{type:"SET-STATUS",status:e}},Se=function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n){var a,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(J(!1)),t.next=4,ve(e);case 4:a=t.sent,n(Ee(a.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(r=t.t0.name,Q(r,n));case 11:return t.prev=11,n(J(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Ce=function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n){var a,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(J(!0)),t.next=4,xe(e);case 4:a=t.sent,n({type:"SET-USER-PROFILE",profile:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(r=t.t0.name,Q(r,n));case 11:return t.prev=11,n(J(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},we=n(123),ye=n.n(we),Pe=n(51),ke=n.n(Pe),Ie=n(52),Ue=n.n(Ie),Te=n.p+"static/media/likeActive.652cec0c.svg",Le=n.p+"static/media/likeNoActive.9895b6a3.svg",Ae=n.p+"static/media/post.f6af492a.svg",Re=function(e){var t=Object(o.c)(),n=e.message,a=e.likesCount,r=e.id,s=function(){t(function(e,t){return{type:"COUNTER",id:e,likesCount:t}}(r,a+1))};return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:Ue.a.item,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{className:Ue.a.icons,src:Ae,alt:"logo"}),Object(O.jsx)("span",{children:n})]}),Object(O.jsxs)("div",{children:[a>0?Object(O.jsx)("img",{onClick:s,className:Ue.a.likesIcon,src:Te,alt:"likes"}):Object(O.jsx)("img",{onClick:s,className:Ue.a.likesIcon,src:Le,alt:"likesActive"}),Object(O.jsx)("span",{children:a})]})]})})},Me=Object(s.memo)((function(){var e=Object(o.c)(),t=p($).map((function(e){var t=e.id,n=e.message,a=e.likesCount;return Object(O.jsx)("div",{children:Object(O.jsx)(Re,{message:n,likesCount:a,id:t})},"".concat(t).concat(a))}));return Object(O.jsxs)("div",{className:ke.a.myPosts,children:[Object(O.jsx)("h3",{className:ke.a.subtitle,children:"My Posts"}),Object(O.jsx)("div",{children:Object(O.jsx)(Be,{onSubmit:function(t){e({type:"ADD-POST",newPostBody:t.newPostBody}),e(Object(_.a)("postAddForm"))}})}),Object(O.jsx)("div",{className:ke.a.posts,children:t})]})})),Fe=(Oe=10,function(e){if(e.length>Oe)return"Max length is ".concat(Oe," symbols")}),Be=Object(k.a)({form:"postAddForm"})((function(e){return Object(O.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(O.jsx)(P.a,{validate:[fe,Fe],component:de,className:"textArea",name:"newPostBody",placeholder:"Enter your post"}),Object(O.jsx)("div",{className:ke.a.boxBtn,children:Object(O.jsx)("button",{className:"btn",children:"Add post"})})]})})),De=n(17),Ge=function(e){var t=e.contactTitle,n=e.contactValue;return Object(O.jsx)("table",{children:Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[t,":"]}),Object(O.jsx)("td",{children:n})]})})})},He=n(15),Ye=n.n(He),ze=function(e){var t=e.profile,n=t.aboutMe,a=t.fullName,r=t.lookingForAJob,s=t.contacts;return Object(O.jsx)("table",{children:Object(O.jsxs)("tbody",{className:Ye.a.tbody,children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Full name:"}),Object(O.jsx)("td",{children:a})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"About me:"}),Object(O.jsx)("td",{children:n})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Looking for a job:"}),Object(O.jsx)("td",{children:r?"yes":"not"})]}),t.lookingForAJob&&Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"My professional skills"}),":",t.lookingForAJob]}),Object(O.jsx)("b",{children:"Contacts"}),": ",Object.keys(s).map((function(e){return Object(O.jsx)("div",{children:null!==s[e]&&Object(O.jsx)(Ge,{contactTitle:e,contactValue:t.contacts[e]})},e)}))]})})},We=Object(k.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,a=e.error;return Object(O.jsxs)("form",{onSubmit:t,children:[Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"save"})}),a&&Object(O.jsx)("div",{children:a}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Full name"}),": ",pe("Full name","fullName",[],be)]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Looking for a job"}),": ",pe("","lookingForAJob",[],be,{type:"checkbox"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"My professional skills"}),":",pe("My professional skills","lookingForAJobDescription",[],de)]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"About me"}),":",pe("About me","aboutMe",[],de)]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Contacts"}),": ",Object.keys(null===n||void 0===n?void 0:n.contacts).map((function(e){return Object(O.jsx)("div",{children:Object(O.jsxs)("b",{children:[e,": ",pe(e,"contacts.".concat(e),[],be)]})},e)}))]})]})})),Je=n.p+"static/media/pencil.0312b8be.svg",qe=function(e){var t=e.status,n=Object(o.c)(),a=Object(s.useState)(!1),c=Object(De.a)(a,2),i=c[0],l=c[1],u=Object(s.useState)(t),j=Object(De.a)(u,2),d=j[0],b=j[1];return Object(O.jsx)("div",{children:i?Object(O.jsx)("input",{className:Ye.a.statusInput,onChange:function(e){b(e.currentTarget.value)},onBlur:function(){n(function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(J(!1)),t.next=4,_e(e);case 4:t.sent.data.resultCode===r.COMPLETED_SUCCESSFULLY_NUMBER&&n(Ee(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof Error&&(a=t.t0.name,Q(a,n));case 11:return t.prev=11,n(J(!0)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}(d)),l(!1)},autoFocus:!0,type:"text",placeholder:"change profile status",value:d}):Object(O.jsxs)("div",{onDoubleClick:function(){l(!0)},className:Ye.a.statusBox,children:[Object(O.jsx)("b",{children:"status:"}),Object(O.jsx)("span",{children:t||"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),Object(O.jsx)("img",{className:Ye.a.pencilDecor,src:Je,alt:"pencil"})]})})},Qe=function(e){var t=e.status,n=e.userId,a=e.myId;return Object(O.jsx)("div",{children:n===a?Object(O.jsx)(qe,{status:t}):Object(O.jsx)("span",{children:t||"not status"})})},Ve=function(e){var t=e.profile,n=e.status,a=e.userId,c=Object(o.c)(),i=Object(s.useState)(!1),l=Object(De.a)(i,2),u=l[0],j=l[1],d=p(K),b=p(E);return t?Object(O.jsxs)("div",{className:Ye.a.wrapper,children:[Object(O.jsxs)("div",{className:Ye.a.changeAvatarBox,children:[Object(O.jsx)("img",{className:Ye.a.images,src:d||R,alt:"img"}),b===a&&Object(O.jsxs)("label",{className:Ye.a.label,children:["change avatar",Object(O.jsx)("input",{className:Ye.a.inputFile,type:"file",onChange:function(e){var t;e.currentTarget.files&&e.currentTarget.files.length&&c((t=e.currentTarget.files[0],function(){var e=Object(B.a)(F.a.mark((function e(n){var a,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(J(!1)),e.next=4,ge(t);case 4:if((a=e.sent).data.resultCode!==r.COMPLETED_SUCCESSFULLY_NUMBER){e.next=9;break}return e.next=8,n(Ce("22141"));case 8:n({type:"SAVE-PHOTO-SUCCESS",photos:a.data.data.photos});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Error&&(s=e.t0.name,Q(s,n));case 14:return e.prev=14,n(J(!0)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()))}})]})]}),Object(O.jsxs)("div",{className:Ye.a.dataChangesBox,children:[Object(O.jsx)("h2",{className:Ye.a.title,children:"User information:"}),Object(O.jsx)(Qe,{status:n,myId:b,userId:a}),u?Object(O.jsx)(We,{initialValues:t,profile:t,onSubmit:function(e){c(function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n,a){var s,c,i;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(J(!1)),s=a().auth.id,t.next=5,Ne(e);case 5:if((c=t.sent).data.resultCode!==r.COMPLETED_SUCCESSFULLY_NUMBER){t.next=10;break}n(Ce(s)),t.next=12;break;case 10:return n(Object(_.b)("edit-profile",{_error:c.data.messages[0]})),t.abrupt("return",Promise.reject(c.data.messages[0]));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0 instanceof Error&&(i=t.t0.name,Q(i,n));case 17:return t.prev=17,n(J(!0)),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)),j(!1)}}):Object(O.jsx)(ze,{profile:t,goToEditMode:function(){return j(!0)}}),b===a&&Object(O.jsx)("button",{className:Ye.a.edit,onClick:function(){j(!u)},children:"Edit information \u270e"})]})]}):Object(O.jsx)(v,{})},Ze=function(){var e=Object(o.c)(),t=p(g),n=p(E),r=p(ee),c=p(X);return Object(s.useEffect)((function(){n&&(e(Ce(Number(n))),e(Se(Number(n))))}),[]),t?Object(O.jsxs)("div",{className:ye.a.wrapper,children:[Object(O.jsx)(Ve,{profile:c,status:r,userId:n}),Object(O.jsx)(Me,{})]}):Object(O.jsx)(u.a,{to:a.LOGIN})},Xe=n(124),Ke=n.n(Xe),$e=n(30),et=n.n($e),tt=function(){var e=function(e){return"".concat(et.a.navigation__link," ").concat(e?et.a.navigation__active:"")};return Object(O.jsx)("div",{children:Object(O.jsxs)("ul",{className:Ke()(et.a.navigation__items,et.a.navigation),children:[Object(O.jsx)("li",{className:et.a.navigation__item,children:Object(O.jsx)(l.b,{className:function(t){var n=t.isActive;return e(n)},to:a.ME,children:"Me"})}),Object(O.jsx)("li",{className:et.a.navigation__item,children:Object(O.jsx)(l.b,{className:function(t){var n=t.isActive;return e(n)},to:a.DIALOGS,children:"Messages"})}),Object(O.jsx)("li",{className:et.a.navigation__item,children:Object(O.jsx)(l.b,{className:function(t){var n=t.isActive;return e(n)},to:a.USERS,children:"Users"})})]})})},nt=n(125),at=n.n(nt),rt=function(){var e=Object(o.c)(),t=p(X),n=p(ee),r=p(g),c=Object(u.h)().userId;return Object(s.useEffect)((function(){c&&(e(Ce(Number(c))),e(Se(Number(c))))}),[c,e]),r?Object(O.jsx)("div",{className:at.a.wrapper,children:Object(O.jsx)(Ve,{profile:t,status:n,userId:c})}):Object(O.jsx)(u.a,{to:a.LOGIN})},st={getUsers:function(e,t){return G.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return G.delete("follow/".concat(e))},follow:function(e){return G.post("follow/".concat(e))}},ct=function(e){return{type:"FOLLOW",userId:e}},it=function(e){return{type:"UNFOLLOW",userId:e}},ot=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},lt=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},ut=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRESS",isFetching:e,userId:t}},jt=function(e,t){return function(){var n=Object(B.a)(F.a.mark((function n(a){var r;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(J(!1)),a(lt(!0)),a(ot(e)),n.next=6,st.getUsers(e,t);case 6:r=n.sent,a({type:"SET-USER",users:r.items}),a({type:"SET-USERS-TOTAL-COUNT",totalCount:r.totalCount});case 9:return n.prev=9,a(J(!0)),a(lt(!1)),n.finish(9);case 13:case"end":return n.stop()}}),n,null,[[0,,9,13]])})));return function(e){return n.apply(this,arguments)}}()},dt=function(e){return e.usersPage.users},bt=function(e){return e.usersPage.pageSize},pt=function(e){return e.usersPage.totalUsersCount},Ot=function(e){return e.usersPage.currentPage},ft=function(e){return e.usersPage.followingInProgress},ht=n(23),mt=n.n(ht),xt=n(31),vt=n.n(xt),_t=n.p+"static/media/leftArrow.1bc5754e.svg",gt=n.p+"static/media/rightArrow.0684657e.svg",Nt=function(e){for(var t=e.pageSize,n=e.totalUsersCount,a=e.currentPage,r=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,o=Object(s.useState)(1),l=Object(De.a)(o,2),u=l[0],j=l[1],d=Math.ceil(n/t),b=Math.ceil(d/i),p=(u-1)*i+1,f=u*i,h=[],m=1;m<=d;m++)h.push(m);return Object(O.jsxs)("div",{className:vt.a.wrapperPaginator,children:[u>1&&Object(O.jsx)("button",{className:vt.a.btn,onClick:function(){j(u-1)},children:Object(O.jsx)("img",{className:vt.a.arrow,src:_t,alt:"leftArrow"})}),h.filter((function(e){return e>=p&&e<=f})).map((function(e){return Object(O.jsx)("span",{className:"".concat(vt.a.span," ").concat(a===e?vt.a.active:""),onClick:function(){return r(e)},children:e},e)})),b>u&&Object(O.jsx)("button",{className:vt.a.btn,onClick:function(){j(u+1)},children:Object(O.jsx)("img",{className:vt.a.arrow,src:gt,alt:"rightArrow"})})]})},Et=function(){var e=Object(B.a)(F.a.mark((function e(t,n,a,s){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ut(!0,n)),e.next=3,a(n);case 3:e.sent.data.resultCode===r.COMPLETED_SUCCESSFULLY_NUMBER&&t(s(n)),t(ut(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),St=function(e){var t=Object.assign({},e),n=t.user,r=t.followingInProgress,s=Object(o.c)(),c=function(e){var t;s((t=e,function(){var e=Object(B.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et(n,t,st.unfollow.bind(st),it);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},i=function(e){var t;s((t=e,function(){var e=Object(B.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et(n,t,st.follow.bind(st),ct);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return Object(O.jsxs)("div",{className:mt.a.wrapper,children:[Object(O.jsx)("div",{children:Object(O.jsx)("div",{children:Object(O.jsx)(l.b,{to:"".concat(a.PROFILE,"/").concat(n.id),children:Object(O.jsx)("img",{src:null!=n.photos.small?n.photos.small:R,className:mt.a.userPhoto,alt:"usePhoto"})})})}),Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:mt.a.name,children:["Name: ",Object(O.jsx)("span",{className:mt.a.nameSpan,children:n.name})]}),Object(O.jsx)("span",{className:mt.a.status,children:n.status?n.status:"no status"}),n.followed?Object(O.jsx)("button",{className:mt.a.btn,disabled:r.some((function(e){return e===n.id})),onClick:function(){return c(n.id)},children:"Unfollow"}):Object(O.jsx)("button",{className:mt.a.btn,disabled:r.some((function(e){return e===n.id})),onClick:function(){return i(n.id)},children:"Follow"})]})})]})},Ct=function(){var e=Object(o.c)(),t=p(Ot),n=p(bt),r=p(pt),c=p(ft),i=p(dt),l=p(g);return Object(s.useEffect)((function(){e(jt(t,n))}),[]),l?Object(O.jsxs)("div",{className:mt.a.wrapperUsers,children:[Object(O.jsx)(Nt,{currentPage:t,onPageChanged:function(t){e(jt(t,n))},totalUsersCount:r,pageSize:n}),Object(O.jsx)("div",{className:mt.a.boxUser,children:i.map((function(e){return Object(O.jsx)(St,{user:e,followingInProgress:c},e.id)}))})]}):Object(O.jsx)(u.a,{to:a.LOGIN})},wt=function(e){return e.app.isProgress},yt=function(e){return e.app.isInitialized},Pt=function(){var e=Object(o.c)(),t=p(j),n=p(wt),r=p(yt);return Object(s.useEffect)((function(){e(ae())}),[]),r?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ne,{}),t&&Object(O.jsx)(f,{}),!n&&Object(O.jsx)("div",{className:"nav",children:Object(O.jsx)("div",{className:"statusBar"})}),Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsx)(tt,{}),Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{path:a.ME,element:Object(O.jsx)(Ze,{})}),Object(O.jsx)(u.b,{path:"".concat(a.PROFILE,"/:userId"),element:Object(O.jsx)(rt,{})}),Object(O.jsx)(u.b,{path:a.DIALOGS,element:Object(O.jsx)(U,{})}),Object(O.jsx)(u.b,{path:a.USERS,element:Object(O.jsx)(Ct,{})}),Object(O.jsx)(u.b,{path:a.LOGIN,element:Object(O.jsx)(me,{})}),Object(O.jsx)(u.b,{path:"/*",element:Object(O.jsx)("div",{children:"error"})})]})]})]}):Object(O.jsx)(v,{})},kt=n(12),It=n(126),Ut=n(119),Tt=n(127),Lt={isInitialized:!1,isProgress:!0,errorMessage:null},At={id:void 0,email:null,login:null,isAuth:!1,captchaUrl:null},Rt=n(29),Mt={dialogs:[{id:1,name:"Slava"},{id:2,name:"Borya"},{id:3,name:"Igor"},{id:4,name:"Viktor"}],messages:[{id:1,message:"Hi how are you doing"},{id:2,message:"I heard that you have problems"},{id:3,message:"how is your health today"},{id:4,message:"Where had you been?"}]},Ft=n(287),Bt={posts:[{id:Object(Ft.a)(),message:"Hi,how are you",likesCount:0},{id:Object(Ft.a)(),message:"Hi, you",likesCount:1},{id:Object(Ft.a)(),message:"Hi,how are you",likesCount:0},{id:Object(Ft.a)(),message:"how are you",likesCount:0}],profile:null,status:""},Dt={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Gt=Object(kt.combineReducers)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(ie.a)(Object(ie.a)({},e),{},{posts:[].concat(Object(Rt.a)(e.posts),[{id:Object(Ft.a)(),message:t.newPostBody,likesCount:0}])});case"SET-USER-PROFILE":return Object(ie.a)(Object(ie.a)({},e),{},{profile:t.profile});case"SET-STATUS":return Object(ie.a)(Object(ie.a)({},e),{},{status:t.status});case"COUNTER":return Object(ie.a)(Object(ie.a)({},e),{},{posts:Object(Rt.a)(e.posts.map((function(e){return e.id===t.id?Object(ie.a)(Object(ie.a)({},e),{},{likesCount:t.likesCount}):e})))});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(ie.a)(Object(ie.a)({},e),{},{messages:[].concat(Object(Rt.a)(e.messages),[{id:6,message:t.newMessageBody}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(ie.a)(Object(ie.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(ie.a)(Object(ie.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(ie.a)(Object(ie.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(ie.a)(Object(ie.a)({},e),{},{followed:!1}):e}))});case"SET-USER":return Object(ie.a)(Object(ie.a)({},e),{},{users:Object(Rt.a)(t.users)});case"SET-CURRENT-PAGE":return Object(ie.a)(Object(ie.a)({},e),{},{currentPage:t.currentPage});case"SET-USERS-TOTAL-COUNT":return Object(ie.a)(Object(ie.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE-IS-FETCHING":return Object(ie.a)(Object(ie.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROGRESS":return Object(ie.a)(Object(ie.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(Rt.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(ie.a)(Object(ie.a)(Object(ie.a)({},e),t.payload),{},{isAuth:t.payload.isAuth});case"GET_CAPTCHA_URL_SUCCESS":return Object(ie.a)(Object(ie.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESS":return Object(ie.a)(Object(ie.a)({},e),{},{isInitialized:t.value});case"APP-ERROR":return Object(ie.a)(Object(ie.a)({},e),{},{errorMessage:t.value});case"PROGRESS":return Object(ie.a)(Object(ie.a)({},e),{},{isProgress:t.value});default:return e}},form:Ut.a}),Ht=Object(kt.createStore)(Gt,Object(It.composeWithDevTools)(Object(kt.applyMiddleware)(Tt.a)));i.a.render(Object(O.jsx)(o.a,{store:Ht,children:Object(O.jsx)(l.a,{children:Object(O.jsx)(Pt,{})})}),document.getElementById("root"))},30:function(e,t,n){e.exports={navigation:"navigation_navigation__1kz7S",navigation__item:"navigation_navigation__item__3lnvr",navigation__link:"navigation_navigation__link__EVboG",navigation__active:"navigation_navigation__active__3gih1"}},31:function(e,t,n){e.exports={wrapperPaginator:"paginator_wrapperPaginator__11cPR",arrow:"paginator_arrow__3hN6X",btn:"paginator_btn__1x78D",active:"paginator_active__1lzh6",span:"paginator_span__1Hryq"}},35:function(e,t,n){e.exports={wrapper:"Dialogs_wrapper__3FNzr",block:"Dialogs_block__Jw7X4",item:"Dialogs_item__2eDoH"}},51:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__1V9iv",posts:"MyPosts_posts__2Iz8x",subtitle:"MyPosts_subtitle__1j497",boxBtn:"MyPosts_boxBtn__ZY5gB"}},52:function(e,t,n){e.exports={item:"Post_item__3-Ewb",icons:"Post_icons__3WArY",likesIcon:"Post_likesIcon__2BwZF"}},84:function(e,t,n){e.exports={wrapper:"error_wrapper__uWiN5",block:"error_block__1yy1p"}},85:function(e,t,n){e.exports={img:"style_img__2HQOT",box:"style_box__2noti"}},88:function(e,t,n){e.exports={formControl:"FormControls_formControl__vKn3r",error:"FormControls_error__3U5re"}}},[[285,1,2]]]);
//# sourceMappingURL=main.1180f6cf.chunk.js.map